/*!
 * project : lobby
 * author : LINOFFICE
 * 로비
 */ function commaAdd(n){return String(n).replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")}let getDatas=function(n,e,o){let t=[];for(let i=0,s=n.length;i<s;i++){let a=$.ajax({type:"GET",url:n[i],dataType:"json"});t.push(a)}$.when.apply($,t).then(e).fail(o)};const windowObjects=[];function openPopup(n,e,o,t,i,s,a,r,l){try{if(1!==i&&0!==i&&"1"!==i&&"0"!==i){var c=i;i=t,t=c}if(navigator.platform.toUpperCase().indexOf("MAC")>=0)var d=o+22;else var d=o;if("string"==typeof n){var g="width="+e+",height="+o+", innerHeight="+d+",toolbar=no,location=no,status=no,menubar=no,top=20,left=20,scrollbars="+i+",resizable=no";""!=t&&t||(t="popup"),a&&(g="fullscreen=1,scrollbars=0");var p=window.open(n,t,g);return null!=p&&p.focus(),r&&windowObjects.push(p),p}t||(t="popup"),i||(i="auto");var u=l?n.href+"?"+l:n.href,g="width="+e+",height="+o+", innerHeight="+d+",toolbar=no,location=no,status=no,menubar=no,top=20,left=20,scrollbars="+i+",resizable=no";a&&(g="fullscreen=1,scrollbars=0");var p=window.open(u,t,g);return s&&(null==p?alert("팝업 차단을 해제하여 주시기 바랍니다."):p.focus()),r&&windowObjects.push(p),p}catch(b){}}window.onunload=function(){if(windowObjects.length)for(var n of windowObjects)n.close()};const isLauncher=/(ngpclient)/i.test(navigator.userAgent.toLowerCase());function get_account_from_launcher(){let n={NCOIN:account?commaAdd(account.ncoin):0,NPOINT:account?commaAdd(account.npoint):0};return n}const NGPBind=n=>{isLauncher&&!window.ngpBindObject&&void 0!==window.CefSharp&&window.CefSharp&&window.CefSharp.BindObjectAsync("ngpBindObject","ngpBindObject").then(n)},NGP={goTo(n){n&&n!==window.location.pathname&&(window.location.href=n)},logout(){if(windowObjects.length)for(var n of windowObjects)n.close();getDatas(["/define/logout"],n=>{window.ngpBindObject&&window.ngpBindObject.onLogout?window.ngpBindObject.onLogout():NGPBind(()=>{window.ngpBindObject.onLogout()})},n=>{window.ngpBindObject&&window.ngpBindObject.onLogoutFail?window.ngpBindObject.onLogoutFail():NGPBind(()=>{window.ngpBindObject.onLogoutFail()})})},user_setting(){account&&account.firstChar&&openPopup("/account/setting",510,546,"settingForm",1,0,!1,!0)},coupon(){account&&account.firstChar&&openPopup("/coupon/form",510,694,"couponForm",1,0,!1,!0)},onNavigation(n){window.ngpBindObject&&window.ngpBindObject.onNavigation?window.ngpBindObject.onNavigation(n):NGPBind(()=>{window.ngpBindObject.onNavigation(n)})},onMessage(n){window.ngpBindObject&&window.ngpBindObject.onMessage?window.ngpBindObject.onMessage(n):NGPBind(()=>{window.ngpBindObject.onMessage(n)})}},NGPIE={goTo(n){n&&n!==window.location.pathname&&(window.location.href=n)},logout(){if(windowObjects.length)for(var n of windowObjects)n.close();getDatas(["/define/logout"],n=>{window.external&&window.external.onLogout&&window.external.onLogout()},n=>{window.external&&window.external.onLogoutFail&&window.external.onLogoutFail()})},user_setting(){account&&account.firstChar&&openPopup("/account/setting",510,546,"settingForm",1,0,!1,!0)},coupon(){account&&account.firstChar&&openPopup("/coupon/form",510,694,"couponForm",1,0,!1,!0)},onNavigation(n){window.external&&window.external.onNavigation&&window.external.onNavigation(n)},onMessage(n){window.external&&window.external.onMessage&&window.external.onMessage(n)}};let lobby_singleton=null,lobby_singletonEnforcer="singletonEnforcer";class Lobby{constructor(n){if(n!==lobby_singletonEnforcer)throw"Cannot--construct singleton";this.init()}static get instance(){return lobby_singleton||(lobby_singleton=new Lobby(lobby_singletonEnforcer)),lobby_singleton}init(){let n=this;n.wrap=document.querySelector("#root"),n.setInstance()}setInstance(){let n=this,e=account&&account.firstChar?account.firstChar:null,o=e?e.name:`대표 케릭터 미설정`,t=e?e.profileUrl:"/img/user_unkown.jpg",i=e?e.level:0,s=`<main id="app"><div id="pageWrap"><div id="homePage"><div class="bg"><div class="container"><header><div><label type="outlined" shape="square" color="white800a">PC게임</label></div><img src="https://cdn.jsdelivr.net/gh/cckiss/web/img/lobby/lin-logo.png?${cacheVersion}" alt="LIN" class="game-logo"></header><div class="content-container"><div class="swiper-opener"><div><section class="swiper-section"><div class="swiper swiper-initialized swiper-horizontal swiper-pointer-events swiper-backface-hidden swiper-header"><div class="swiper-slide"><img src="https://cdn.jsdelivr.net/gh/cckiss/web/img/lobby/play.png"><span>${notification_message}</span></div></div></section></div></div><div class="content-mouse"></div><div class="content-bottom"><div class="left-dim"></div><div class="right-dim"></div></div><div class="dimming"></div></div><section class="user-section"><div class="top"><div size="600" class="left"><div type="character" class="character-img"><div><img src="https://cdn.jsdelivr.net/gh/cckiss/web${t}?${cacheVersion}" alt=""></div></div></div><div class="right"><strong>${o}</strong><span> ${serverName}</span></div></div><div class="bottom"><ul><li><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="rgba(255, 255, 255, 0.94)"><path d="M4 17.844h7.168V15.86h-4.8V6.004H4zM14.183 17.844h2.72l2.992-8.96H17.64l-1.312 4.464c-.24.88-.496 1.808-.72 2.72h-.08c-.24-.912-.496-1.84-.72-2.72l-1.312-4.464h-2.368z"></path></svg>${i}</li></ul></div></section></div></div></div></div></main>`;n.wrap.innerHTML=s}}Lobby.instance;
