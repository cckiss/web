/*!
 * project : lobby
 * author : LINOFFICE
 * 로비
 */ function commaAdd(t){return String(t).replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")}let getDatas=function(t,e,n){let i=[];for(let o=0,s=t.length;o<s;o++){let l=$.ajax({type:"GET",url:t[o],dataType:"json"});i.push(l)}$.when.apply($,i).then(e).fail(n)};const windowObjects=[];function openPopup(t,e,n,i,o,s,l,a,r){try{if(1!==o&&0!==o&&"1"!==o&&"0"!==o){var c=o;o=i,i=c}if(navigator.platform.toUpperCase().indexOf("MAC")>=0)var d=n+22;else var d=n;if("string"==typeof t){var g="width="+e+",height="+n+", innerHeight="+d+",toolbar=no,location=no,status=no,menubar=no,top=20,left=20,scrollbars="+o+",resizable=no";""!=i&&i||(i="popup"),l&&(g="fullscreen=1,scrollbars=0");var p=window.open(t,i,g);return null!=p&&p.focus(),a&&windowObjects.push(p),p}i||(i="popup"),o||(o="auto");var h=r?t.href+"?"+r:t.href,g="width="+e+",height="+n+", innerHeight="+d+",toolbar=no,location=no,status=no,menubar=no,top=20,left=20,scrollbars="+o+",resizable=no";l&&(g="fullscreen=1,scrollbars=0");var p=window.open(h,i,g);return s&&(null==p?alert("팝업 차단을 해제하여 주시기 바랍니다."):p.focus()),a&&windowObjects.push(p),p}catch(u){}}window.onunload=function(){if(windowObjects.length)for(var t of windowObjects)t.close()};const isLauncher=/(ngpclient)/i.test(navigator.userAgent.toLowerCase());function get_account_from_launcher(){let t={NCOIN:account?commaAdd(account.ncoin):0,NPOINT:account?commaAdd(account.npoint):0};return t}const NGPBind=t=>{isLauncher&&!window.ngpBindObject&&void 0!==window.CefSharp&&window.CefSharp&&window.CefSharp.BindObjectAsync("ngpBindObject","ngpBindObject").then(t)},NGP={goTo(t){t&&t!==window.location.pathname&&(window.location.href=t)},logout(){if(windowObjects.length)for(var t of windowObjects)t.close();getDatas(["/define/logout"],t=>{window.ngpBindObject&&window.ngpBindObject.onLogout?window.ngpBindObject.onLogout():NGPBind(()=>{window.ngpBindObject.onLogout()})},t=>{window.ngpBindObject&&window.ngpBindObject.onLogoutFail?window.ngpBindObject.onLogoutFail():NGPBind(()=>{window.ngpBindObject.onLogoutFail()})})},user_setting(){account&&account.firstChar&&openPopup("/account/setting",510,546,"settingForm",1,0,!1,!0)},coupon(){account&&account.firstChar&&openPopup("/coupon/form",510,694,"couponForm",1,0,!1,!0)},onNavigation(t){window.ngpBindObject&&window.ngpBindObject.onNavigation?window.ngpBindObject.onNavigation(t):NGPBind(()=>{window.ngpBindObject.onNavigation(t)})},onMessage(t){window.ngpBindObject&&window.ngpBindObject.onMessage?window.ngpBindObject.onMessage(t):NGPBind(()=>{window.ngpBindObject.onMessage(t)})}},NGPIE={goTo(t){t&&t!==window.location.pathname&&(window.location.href=t)},logout(){if(windowObjects.length)for(var t of windowObjects)t.close();getDatas(["/define/logout"],t=>{window.external&&window.external.onLogout&&window.external.onLogout()},t=>{window.external&&window.external.onLogoutFail&&window.external.onLogoutFail()})},user_setting(){account&&account.firstChar&&openPopup("/account/setting",510,546,"settingForm",1,0,!1,!0)},coupon(){account&&account.firstChar&&openPopup("/coupon/form",510,694,"couponForm",1,0,!1,!0)},onNavigation(t){window.external&&window.external.onNavigation&&window.external.onNavigation(t)},onMessage(t){window.external&&window.external.onMessage&&window.external.onMessage(t)}};function Rolling(t){var e=this;this.object=document.getElementById(t.rollId),this.object.onmouseover=function(){e.stop()},this.object.onmouseout=function(){e.play()},this.delay=t.delay||1e3,this.speed=t.speed||50,this.step=t.step||1,this.mover=t.mover||!1,this.elChildHeight=t.childHeight,this.elHeight=this.object.offsetHeight,this.elPosition=0,this.object.appendChild(this.object.cloneNode(!0)),this.control=setTimeout(function(){e.play()},this.delay)}Rolling.prototype={play:function(){var t=this;this.elPosition=this.elPosition>(this.mover?this.elHeight:0)?this.elPosition-this.elHeight:this.elPosition+1,this.object.style.top=(this.mover?-this.elPosition:this.elPosition)+"px",this.control=setTimeout(function(){t.play()},this.elPosition%(this.elChildHeight*this.step)==0?this.delay:this.speed)},stop:function(){clearTimeout(this.control)}};let lobby_singleton=null,lobby_singletonEnforcer="singletonEnforcer";class Lobby{constructor(t){if(t!==lobby_singletonEnforcer)throw"Cannot--construct singleton";this.init()}static get instance(){return lobby_singleton||(lobby_singleton=new Lobby(lobby_singletonEnforcer)),lobby_singleton}init(){let t=this;t.wrap=document.querySelector("#root"),t.setInstance()}setInstance(){let t=this,e=account&&account.firstChar?account.firstChar:null,n=e?e.name:`대표 케릭터 미설정`,i=e?e.profileUrl:"/img/user_unkown.jpg",o=e?e.level:0,s="";notification_message&&(s=notification_message.map((t,e)=>`<li>${t.content}</li>`).join(""));let l=`<main id="app"><div id="pageWrap"><div id="homePage"><div class="bg"><div class="container"><header><div><label type="outlined" shape="square" color="white800a">PC게임</label></div><img src="https://cdn.jsdelivr.net/gh/cckiss/web/img/lobby/lin-logo.png?${cacheVersion}" alt="LIN" class="game-logo"></header><div class="content-container"><div class="swiper-opener"><div><section class="swiper-section"><div class="swiper swiper-initialized swiper-horizontal swiper-pointer-events swiper-backface-hidden swiper-header"><div class="swiper-slide"><img src="https://cdn.jsdelivr.net/gh/cckiss/web/img/lobby/play.png"><span><ul id="rolling">${s}</ul></span></div></div></section></div></div><div class="content-mouse"></div><div class="content-bottom"><div class="left-dim"></div><div class="right-dim"></div></div><div class="dimming"></div></div><section class="user-section"><div class="top"><div size="600" class="left"><div type="character" class="character-img"><div><img src="https://cdn.jsdelivr.net/gh/cckiss/web${i}?${cacheVersion}" alt=""></div></div></div><div class="right"><strong>${n}</strong><span> ${serverName}</span></div></div><div class="bottom"><ul><li><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="rgba(255, 255, 255, 0.94)"><path d="M4 17.844h7.168V15.86h-4.8V6.004H4zM14.183 17.844h2.72l2.992-8.96H17.64l-1.312 4.464c-.24.88-.496 1.808-.72 2.72h-.08c-.24-.912-.496-1.84-.72-2.72l-1.312-4.464h-2.368z"></path></svg>${o}</li></ul></div></section></div></div></div></div></main>`;t.wrap.innerHTML=l,notification_message&&notification_message.length>1&&new Rolling({rollId:"rolling",delay:3e3,speed:20,step:1,mover:!0,childHeight:20})}}Lobby.instance;
